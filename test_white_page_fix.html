<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test White Page Fix</title>
</head>
<body>
    <h1>Test White Page Fix</h1>
    <div id="results"></div>
    
    <script>
        async function testWhitePageFix() {
            const resultsDiv = document.getElementById('results');
            
            try {
                resultsDiv.innerHTML = '<p>üîÑ Testing if white page issue is fixed...</p>';
                
                // Test 1: Check if React app loads
                console.log('üîÑ Test 1: Loading React app...');
                const reactResponse = await fetch('http://localhost:5178/');
                
                if (!reactResponse.ok) {
                    throw new Error(`React app not accessible: ${reactResponse.status}`);
                }
                
                const htmlContent = await reactResponse.text();
                console.log('‚úÖ Test 1: React app HTML loaded');
                
                // Test 2: Check if there are any obvious errors in the HTML
                if (htmlContent.includes('<!DOCTYPE html>') && htmlContent.includes('<div id="root">')) {
                    console.log('‚úÖ Test 2: HTML structure looks correct');
                } else {
                    console.warn('‚ö†Ô∏è Test 2: HTML structure might be incomplete');
                }
                
                // Test 3: Try to load the main JS bundle
                const jsMatch = htmlContent.match(/src="([^"]*\.js)"/);
                if (jsMatch) {
                    const jsUrl = `http://localhost:5178${jsMatch[1]}`;
                    console.log('üîÑ Test 3: Loading JS bundle:', jsUrl);
                    
                    const jsResponse = await fetch(jsUrl);
                    if (jsResponse.ok) {
                        console.log('‚úÖ Test 3: JS bundle loads successfully');
                    } else {
                        console.warn('‚ö†Ô∏è Test 3: JS bundle failed to load:', jsResponse.status);
                    }
                }
                
                resultsDiv.innerHTML = `
                    <h2>‚úÖ Tests Completed</h2>
                    <ul>
                        <li>‚úÖ React app is accessible at <a href="http://localhost:5178" target="_blank">http://localhost:5178</a></li>
                        <li>‚úÖ HTML structure is correct</li>
                        <li>‚úÖ JavaScript bundle loads</li>
                    </ul>
                    
                    <h3>Next Steps:</h3>
                    <ol>
                        <li>Open <a href="http://localhost:5178" target="_blank">http://localhost:5178</a> in a new tab</li>
                        <li>Check if the page loads correctly (no white page)</li>
                        <li>Open browser console (F12) to check for any JavaScript errors</li>
                        <li>Try logging in with admin/admin123</li>
                    </ol>
                    
                    <p><strong>If you still see a white page:</strong></p>
                    <ul>
                        <li>Check the browser console for JavaScript errors</li>
                        <li>Try hard refresh (Ctrl+F5)</li>
                        <li>Clear browser cache</li>
                    </ul>
                `;
                
            } catch (error) {
                console.error('‚ùå Test failed:', error);
                resultsDiv.innerHTML = `
                    <h2>‚ùå Test Failed!</h2>
                    <p><strong>Error:</strong> ${error.message}</p>
                    <p>The React app might not be running or there might be a build error.</p>
                    <p>Check the terminal where you ran 'npm run dev' for error messages.</p>
                `;
            }
        }
        
        window.addEventListener('load', testWhitePageFix);
    </script>
</body>
</html>